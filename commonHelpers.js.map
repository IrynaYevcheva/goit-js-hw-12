{"version":3,"file":"commonHelpers.js","sources":["../src/js/message.js","../src/js/simplelightbox.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport default function iziToastMessage(message) {\n  iziToast.show({\n    close: false,\n    closeOnClick: true,\n    message,\n    messageColor: 'white',\n    timeout: 3000,\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    progressBar: false,\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('#gallery a', {\n  showCounter: false,\n  captionsData: 'alt',\n  captionDelay: 200,\n});\n\nexport default lightbox;\n","import iziToastMessage from './js/message.js';\nimport lightbox from './js/simplelightbox.js';\n\nimport axios from 'axios';\n\nconst form = document.querySelector('#form');\nconst gallery = document.querySelector('#gallery');\nconst loadingMessage = document.querySelector('.loader');\nconst loaderButton = document.querySelector('.loader-button');\n\nlet page = 1;\nconst per_page = 40;\nlet userSearchRequest;\n\nform.addEventListener('submit', fetchImg);\nloaderButton.addEventListener('click', onClickLoading);\n\nasync function onClickLoading() {\n  loaderButton.classList.add('hidden');\n  loadingMessage.classList.remove('hidden');\n  await getImg(userSearchRequest);\n}\n\nfunction onClickLoadingBtn(totalHits) {\n  const totalPages = Math.ceil(totalHits / per_page);\n  if (page > totalPages) {\n    iziToastMessage(\n      'We are sorry, but you have reached the end of search results.'\n    );\n  } else {\n    loaderButton.classList.remove('hidden');\n  }\n}\n\nasync function fetchImg(event) {\n  event.preventDefault();\n  loadingMessage.classList.remove('hidden');\n  gallery.innerHTML = '';\n  page = 1;\n  userSearchRequest = event.currentTarget.elements.inputToSearch.value.trim();\n  event.currentTarget.reset();\n  loaderButton.classList.add('hidden');\n  await getImg(userSearchRequest);\n}\n\nasync function getImg(userSearchRequest) {\n  try {\n    const searchParams = new URLSearchParams({\n      key: '41535570-7b1028e1c6f1b041bb0744cc1',\n      q: userSearchRequest,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page,\n    });\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    const images = response.data;\n    if (images.hits.length === 0) {\n      iziToastMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      loaderButton.classList.add('hidden');\n    } else {\n      renderImages(images);\n      onClickLoadingBtn(images.totalHits);\n      lightbox.refresh();\n    }\n  } catch (error) {\n    iziToastMessage('Oop.. somethings. went wrong. Please try again.');\n  } finally {\n    loadingMessage.classList.add('hidden');\n  }\n}\n\nfunction renderImages(images) {\n  page += 1;\n  const markup = images.hits\n    .map(\n      img =>\n        `<li class=\"gallery-item\">\n        <a href=\"${img.largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n        </a>\n        <div class=\"image-info\">\n          <div>Likes:<span>${img.likes}</span></div>\n          <div>Views:<span>${img.views}</span></div>\n          <div>Comments:<span>${img.comments}</span></div>\n          <div>Downloads:<span>${img.downloads}</span></div>\n        </div>\n      </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  const scrollItem = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: scrollItem.height * 2.0,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["iziToastMessage","message","iziToast","lightbox","SimpleLightbox","form","gallery","loadingMessage","loaderButton","page","per_page","userSearchRequest","fetchImg","onClickLoading","getImg","onClickLoadingBtn","totalHits","totalPages","event","searchParams","images","axios","renderImages","markup","img","scrollItem"],"mappings":"owBAGe,SAASA,EAAgBC,EAAS,CAC/CC,EAAS,KAAK,CACZ,MAAO,GACP,aAAc,GACd,QAAAD,EACA,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,WACf,SAAU,WACV,gBAAiB,UACjB,YAAa,EACjB,CAAG,CACH,CCbA,IAAIE,EAAW,IAAIC,EAAe,aAAc,CAC9C,YAAa,GACb,aAAc,MACd,aAAc,GAChB,CAAC,ECFD,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,SAAS,EACjDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIC,EAEJN,EAAK,iBAAiB,SAAUO,CAAQ,EACxCJ,EAAa,iBAAiB,QAASK,CAAc,EAErD,eAAeA,GAAiB,CAC9BL,EAAa,UAAU,IAAI,QAAQ,EACnCD,EAAe,UAAU,OAAO,QAAQ,EACxC,MAAMO,EAAOH,CAAiB,CAChC,CAEA,SAASI,EAAkBC,EAAW,CACpC,MAAMC,EAAa,KAAK,KAAKD,EAAYN,CAAQ,EAC7CD,EAAOQ,EACTjB,EACE,+DACN,EAEIQ,EAAa,UAAU,OAAO,QAAQ,CAE1C,CAEA,eAAeI,EAASM,EAAO,CAC7BA,EAAM,eAAc,EACpBX,EAAe,UAAU,OAAO,QAAQ,EACxCD,EAAQ,UAAY,GACpBG,EAAO,EACPE,EAAoBO,EAAM,cAAc,SAAS,cAAc,MAAM,OACrEA,EAAM,cAAc,QACpBV,EAAa,UAAU,IAAI,QAAQ,EACnC,MAAMM,EAAOH,CAAiB,CAChC,CAEA,eAAeG,EAAOH,EAAmB,CACvC,GAAI,CACF,MAAMQ,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGR,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAF,EACA,SAAAC,CACN,CAAK,EAIKU,GAHW,MAAMC,EAAM,IAC3B,4BAA4BF,GAClC,GAC4B,KACpBC,EAAO,KAAK,SAAW,GACzBpB,EACE,0EACR,EACMQ,EAAa,UAAU,IAAI,QAAQ,IAEnCc,EAAaF,CAAM,EACnBL,EAAkBK,EAAO,SAAS,EAClCjB,EAAS,QAAO,EAEnB,MAAC,CACAH,EAAgB,iDAAiD,CACrE,QAAY,CACRO,EAAe,UAAU,IAAI,QAAQ,CACtC,CACH,CAEA,SAASe,EAAaF,EAAQ,CAC5BX,GAAQ,EACR,MAAMc,EAASH,EAAO,KACnB,IACCI,GACE;AAAA,mBACWA,EAAI;AAAA,0CACmBA,EAAI,sBAAsBA,EAAI;AAAA;AAAA;AAAA,6BAG3CA,EAAI;AAAA,6BACJA,EAAI;AAAA,gCACDA,EAAI;AAAA,iCACHA,EAAI;AAAA;AAAA,YAGhC,EACA,KAAK,EAAE,EACVlB,EAAQ,mBAAmB,YAAaiB,CAAM,EAC9C,MAAME,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAW,OAAS,EACzB,KAAM,EACN,SAAU,QACd,CAAG,CACH"}