{"version":3,"file":"commonHelpers.js","sources":["../src/js/message.js","../src/js/simplelightbox.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport default function iziToastMessage(message) {\n  iziToast.show({\n    close: false,\n    closeOnClick: true,\n    message,\n    messageColor: 'white',\n    timeout: 3000,\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    progressBar: false,\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('#gallery a', {\n  showCounter: false,\n  captionsData: 'alt',\n  captionDelay: 200,\n});\n\nexport default lightbox;\n","import iziToastMessage from './js/message.js';\nimport lightbox from './js/simplelightbox.js';\n\nimport axios from 'axios';\n\nconst form = document.querySelector('#form');\nconst gallery = document.querySelector('#gallery');\nconst loadingMessage = document.querySelector('.loader');\nconst loaderButton = document.querySelector('.loader-button');\n\nconst per_page = 40;\nlet page = 1;\nlet userSearchRequest;\n\nform.addEventListener('submit', onSearch);\nloaderButton.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  loadingMessage.classList.remove('hidden');\n  gallery.innerHTML = '';\n  page = 1;\n  userSearchRequest = event.currentTarget.elements.inputToSearch.value.trim();\n  event.currentTarget.reset();\n  loaderButton.classList.add('hidden');\n  await fetchImg(userSearchRequest);\n}\n\nasync function onLoadMore() {\n  loaderButton.classList.add('hidden');\n  loadingMessage.classList.remove('hidden');\n  page += 1;\n  await fetchImg(userSearchRequest);\n}\n\nasync function fetchImg(userSearchRequest) {\n  try {\n    const searchParams = new URLSearchParams({\n      key: '41535570-7b1028e1c6f1b041bb0744cc1',\n      q: userSearchRequest,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page,\n    });\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    const images = response.data;\n    if (images.hits.length === 0) {\n      iziToastMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      loaderButton.classList.add('hidden');\n    } else {\n      renderImages(images);\n      addLoadingBtn(images.totalHits);\n      lightbox.refresh();\n    }\n  } catch (error) {\n    iziToastMessage(`Api request error: ${error}`);\n  } finally {\n    loadingMessage.classList.add('hidden');\n  }\n}\n\nfunction renderImages(images) {\n  const markup = images.hits\n    .map(\n      img =>\n        `<li class=\"gallery-item\">\n        <a href=\"${img.largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\"/>\n        </a>\n        <div class=\"image-info\">\n          <div>Likes:<span>${img.likes}</span></div>\n          <div>Views:<span>${img.views}</span></div>\n          <div>Comments:<span>${img.comments}</span></div>\n          <div>Downloads:<span>${img.downloads}</span></div>\n        </div>\n      </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction addLoadingBtn(totalHits) {\n  const totalPages = Math.ceil(totalHits / per_page);\n  if (page >= totalPages) {\n    iziToastMessage(\n      'We are sorry, but you have reached the end of search results.'\n    );\n  } else {\n    loaderButton.classList.remove('hidden');\n    if (page >= 2) {\n      scroll();\n    }\n  }\n}\n\nfunction scroll() {\n  const scrollItem = document.querySelector('.gallery-item');\n  const galleryItemHeight = scrollItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryItemHeight * 2.0,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["iziToastMessage","message","iziToast","lightbox","SimpleLightbox","form","gallery","loadingMessage","loaderButton","per_page","page","userSearchRequest","onSearch","onLoadMore","event","fetchImg","searchParams","images","axios","renderImages","addLoadingBtn","error","markup","img","totalHits","totalPages","scroll","galleryItemHeight"],"mappings":"owBAGe,SAASA,EAAgBC,EAAS,CAC/CC,EAAS,KAAK,CACZ,MAAO,GACP,aAAc,GACd,QAAAD,EACA,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,WACf,SAAU,WACV,gBAAiB,UACjB,YAAa,EACjB,CAAG,CACH,CCbA,IAAIE,EAAW,IAAIC,EAAe,aAAc,CAC9C,YAAa,GACb,aAAc,MACd,aAAc,GAChB,CAAC,ECFD,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,SAAS,EACjDC,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAW,GACjB,IAAIC,EAAO,EACPC,EAEJN,EAAK,iBAAiB,SAAUO,CAAQ,EACxCJ,EAAa,iBAAiB,QAASK,CAAU,EAEjD,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EACpBP,EAAe,UAAU,OAAO,QAAQ,EACxCD,EAAQ,UAAY,GACpBI,EAAO,EACPC,EAAoBG,EAAM,cAAc,SAAS,cAAc,MAAM,OACrEA,EAAM,cAAc,QACpBN,EAAa,UAAU,IAAI,QAAQ,EACnC,MAAMO,EAASJ,CAAiB,CAClC,CAEA,eAAeE,GAAa,CAC1BL,EAAa,UAAU,IAAI,QAAQ,EACnCD,EAAe,UAAU,OAAO,QAAQ,EACxCG,GAAQ,EACR,MAAMK,EAASJ,CAAiB,CAClC,CAEA,eAAeI,EAASJ,EAAmB,CACzC,GAAI,CACF,MAAMK,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAD,EACA,SAAAD,CACN,CAAK,EAIKQ,GAHW,MAAMC,EAAM,IAC3B,4BAA4BF,GAClC,GAC4B,KACpBC,EAAO,KAAK,SAAW,GACzBjB,EACE,0EACR,EACMQ,EAAa,UAAU,IAAI,QAAQ,IAEnCW,EAAaF,CAAM,EACnBG,EAAcH,EAAO,SAAS,EAC9Bd,EAAS,QAAO,EAEnB,OAAQkB,EAAP,CACArB,EAAgB,sBAAsBqB,GAAO,CACjD,QAAY,CACRd,EAAe,UAAU,IAAI,QAAQ,CACtC,CACH,CAEA,SAASY,EAAaF,EAAQ,CAC5B,MAAMK,EAASL,EAAO,KACnB,IACCM,GACE;AAAA,mBACWA,EAAI;AAAA,0CACmBA,EAAI,sBAAsBA,EAAI;AAAA;AAAA;AAAA,6BAG3CA,EAAI;AAAA,6BACJA,EAAI;AAAA,gCACDA,EAAI;AAAA,iCACHA,EAAI;AAAA;AAAA,YAGhC,EACA,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,YAAagB,CAAM,CAChD,CAEA,SAASF,EAAcI,EAAW,CAChC,MAAMC,EAAa,KAAK,KAAKD,EAAYf,CAAQ,EAC7CC,GAAQe,EACVzB,EACE,+DACN,GAEIQ,EAAa,UAAU,OAAO,QAAQ,EAClCE,GAAQ,GACVgB,IAGN,CAEA,SAASA,GAAS,CAEhB,MAAMC,EADa,SAAS,cAAc,eAAe,EACpB,sBAAqB,EAAG,OAC7D,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,KAAM,EACN,SAAU,QACd,CAAG,CACH"}